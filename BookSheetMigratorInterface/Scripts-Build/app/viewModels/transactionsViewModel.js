define(["knockout","app/viewModels/transactionViewModel","app/bindings/isLoadingWhen","app/bindings/pagination","app/utilities/utilities"],function(e,t){return function(){function s(e,t,n){return r.error(""),$.ajax({type:t,url:e,dataType:"json",contentType:"application/json",data:n?JSON.stringify(n):null}).fail(function(e,t,n){r.error(n)})}function o(e){return r.error(""),$.ajax({type:"GET",url:i+"unimported",dataType:"json",contentType:"application/json",data:e?JSON.stringify(e):null,success:function(e){var n=$.map(e,function(e){return new t(e,i)});r.isLoadingTransactions(!1),r.transactions(n)}}).fail(function(e,t,n){r.error(n)})}var r=this;r.transactions=e.observableArray([]),r.error=e.observable(),r.hasTransactions=e.computed(function(){return r.transactions().length>0}),r.filter=e.observable(""),r.filteredTransactions=e.computed(function(){var t=r.filter().toLowerCase();return t?e.utils.arrayFilter(r.transactions(),function(e){return e.vin.toLowerCase().startsWith(t)||e.sellerCompanyName.toLowerCase().startsWith(t)||e.sellerDmvNumber.toLowerCase().startsWith(t)||e.sellerPhone.toLowerCase().startsWith(t)||e.sellerAddress.toLowerCase().startsWith(t)||e.sellerCity.toLowerCase().startsWith(t)||e.buyerCompanyName.toLowerCase().startsWith(t)||e.buyerDmvNumber.toLowerCase().startsWith(t)||e.buyerPhone.toLowerCase().startsWith(t)||e.buyerAddress.toLowerCase().startsWith(t)||e.buyerCity.toLowerCase().startsWith(t)}):r.transactions()}),r.isLoadingTransactions=e.observable(!0),r.itemCount=e.computed(function(){return r.transactions().length}),r.perPage=e.observable(10),r.pageIndex=e.observable(0),r.page=e.computed(function(){var e=r.pageIndex()*r.perPage();return r.filteredTransactions().slice(e,e+r.perPage())}),r.fadeIn=function(e){$(e).hide(),$(e).fadeIn(500)};var i="/api/Transaction/";r.importAll=function(){e.utils.arrayForEach(r.transactions,function(e){e.importable()&&e.import()})},r.pullNewAndUpdateExistingTransactions=function(){},o()}});
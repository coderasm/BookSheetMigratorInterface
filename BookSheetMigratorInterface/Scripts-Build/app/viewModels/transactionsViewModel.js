define(["knockout","app/viewModels/transactionViewModel","app/bindings/isLoadingWhen","app/bindings/pagination","app/utilities/utilities"],function(e,t){return function(){function s(e,t,n){return r.error(""),$.ajax({type:t,url:e,dataType:"json",contentType:"application/json",data:n?JSON.stringify(n):null}).fail(function(e,t,n){r.error(n)})}function o(e){return r.error(""),$.ajax({type:"GET",url:i+"unimported",dataType:"json",contentType:"application/json",data:e?JSON.stringify(e):null,success:function(e){var n=$.map(e,function(e){return new t(e,i)});r.isLoadingTransactions(!1),r.transactions(n)}}).fail(function(e,t,n){r.error(n)})}var r=this;r.transactions=e.observableArray([]),r.error=e.observable(),r.hasTransactions=e.computed(function(){return r.transactions().length>0}),r.filter=e.observable(""),r.filteredTransactions=e.computed(function(){var t=r.filter().toLowerCase();return t?e.utils.arrayFilter(r.transactions(),function(e){return e.vin.toLowerCase().contains(t)}):r.transactions()}),r.isLoadingTransactions=e.observable(!0),r.itemCount=e.computed(function(){return r.transactions().length}),r.perPage=e.observable(10),r.pageIndex=e.observable(0),r.page=e.computed(function(){var e=r.pageIndex()*r.perPage();return r.filteredTransactions().slice(e,e+r.perPage())}),r.fadeIn=function(e){$(e).hide(),$(e).fadeIn(500)};var i="/api/Transaction/";r.selectAll=function(){e.utils.arrayForEach(r.page(),function(e){e.isSelected(!0)})},r.selectNone=function(){e.utils.arrayForEach(r.page(),function(e){e.isSelected(!1)})},r.importSelected=function(){e.utils.arrayForEach(r.transactions(),function(e){e.importable()&&e.isSelected()&&e.importSale()})},r.updateSelected=function(){e.utils.arrayForEach(r.transactions(),function(e){e.updateable()&&e.isSelected()&&e.updateSale()})},r.pullNewAndUpdateExistingTransactions=function(){},o()}});
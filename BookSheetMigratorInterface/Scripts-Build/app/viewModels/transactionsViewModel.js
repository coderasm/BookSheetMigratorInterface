define(["knockout","app/viewModels/transactionViewModel","app/common/pausableComputed","app/bindings/isLoadingWhen"],function(e,t){return function(){function s(e,t,n){return r.error(""),$.ajax({type:t,url:e,dataType:"json",contentType:"application/json",data:n?JSON.stringify(n):null}).fail(function(e,t,n){r.error(n)})}function o(){s(i+"unimported","GET").done(function(e){var n=$.map(e,function(e){var n=new t(e,i);return r.attachUpdater(n),n});r.transactions(n)})}var r=this;r.transactions=e.observableArray(),r.error=e.observable(),r.hasTransactions=e.computed(function(){return r.transactions().length>0}),r.fadeIn=function(e){$(e).hide(),$(e).fadeIn(1e3)};var i="/api/Transaction/";r.importAll=function(){e.utils.arrayForEach(r.transactions,function(e){e.importable()&&e.import()})},r.pauseAllUpdateListeners=function(){e.utils.arrayForEach(r.transactions,function(e){e.update.pause()})},r.resumeAllUpdateListeners=function(){e.utils.arrayForEach(r.transactions,function(e){e.update.resume()})},r.pullNewAndUpdateExistingTransactions=function(){},r.attachUpdater=function(t){t.update=e.pauseableComputed(function(){t.firstTimeLoading||$.ajax({url:t.transactionUri+"update",type:"PUT",data:{eventId:t.eventId,transactionId:t.transactionId,bidAmount:t.bidAmount(),soldDate:t.soldDate(),sellerDealerId:t.sellerDealerId(),buyerDealerId:t.buyerDealerId(),buyerContactId:t.buyerContactId}}),t.firstTimeLoading=!1}).extend({rateLimit:0})},o()}});